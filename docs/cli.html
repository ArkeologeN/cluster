<html>
  <head>
    <title>Cluster - extensible multi-core server management for nodejs</title>
    <link rel='stylesheet' href='../main.css' />
  </head>
  <body class="subpage">
    <div id="content"><h2>CLI</h2>

<p> Adds a command-line interface to your cluster.</p>

<h3>Usage</h3>

<p>This plugin requires that you use <code>pidfiles()</code>
above <code>cli()</code>, so that the pidfile directory
is exposed.</p>

<pre><code>  cluster(server)
    .use(cluster.pidfiles())
    .use(cluster.cli())
    .listen(3000);
</code></pre>

<p>Once set up our server script serves as both
the master, and the CLI. For example we may
still launch the server(s) as shown below.</p>

<pre><code>   $ nohup node server.js &amp;
</code></pre>

<p>However now we may also utilize commands
provided by this plugin.</p>

<pre><code>  $ node server.js status

  master 3281 alive
  worker 0 3282 dead
  worker 1 3283 alive
  worker 2 3284 alive
  worker 3 3285 alive

  $ node server.js restart
  $ node server.js shutdown
</code></pre>

<p>For more command information use <code>--help</code>.</p>

<pre><code>  $ node server.js --help
</code></pre>

<h3>Defining CLI Commands</h3>

<p> Plugins may define additional commands, simply by invoking <code>cluster.cli.define()</code> passing the flag(s), a callback function,
 and a description. Below is the implementation of <code>--help</code> for reference:</p>

<pre><code>  var cli = require('cluster').cli;

  cli.define('-h, --help, help', function(master){
    console.log('\n  Usage: node &lt;file&gt; &lt;command&gt;\n');
    commands.forEach(function(command){
      console.log('    '
        + command.flags.join(', ')
        + '\n    '
        + '\033[90m' + command.desc + '\033[0m'
        + '\n');
    });
    console.log();
    process.exit();
  }, 'Show help information');
</code></pre>
    </div>
  </body>
</html>